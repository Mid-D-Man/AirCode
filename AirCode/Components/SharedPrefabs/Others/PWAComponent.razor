@* PWAComponent.razor *@
@using Microsoft.JSInterop
@implements IAsyncDisposable

<div class="pwa-container">
    @if (!_status.IsOnline)
    {
        <div class="pwa-status offline">
            <span>ðŸ“¡ Offline Mode</span>
            @if (!IsCurrentRouteOffline)
            {
                <div class="offline-routes">
                    @foreach (var route in _offlineRoutes)
                    {
                        <a href="@route.Url" class="offline-link">@route.DisplayName</a>
                    }
                </div>
            }
        </div>
    }

    @if (_status.IsInstallable)
    {
        <button class="pwa-install" @onclick="InstallApp">ðŸ“± Install App</button>
    }

    @if (_status.UpdateAvailable)
    {
        <div class="pwa-update">
            <span>ðŸ”„ Update ready</span>
            <button @onclick="ApplyUpdate">Update</button>
        </div>
    }

    @if (ShowControls && _status.IsInstalled)
    {
        <div class="pwa-controls">
            <button @onclick="CheckForUpdates">Check Updates</button>
        </div>
    }

    @if (!string.IsNullOrEmpty(_statusMessage))
    {
        <div class="pwa-message">
            @_statusMessage
            <button @onclick="ClearStatus">Ã—</button>
        </div>
    }
</div>