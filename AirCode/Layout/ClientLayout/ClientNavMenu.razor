@* Layout/ClientLayout/ClientNavMenu.razor *@
@namespace AirCode.Layout.ClientLayout
@inject NavigationManager NavigationManager
@inject AirCode.Services.VisualElements.ISvgIconService SvgIconService
@using AirQrCode.Components.SharedPrefabs

<div class="client-nav-menu">
    <div class="nav-buttons">
        <CircularNavigationButton 
            IconPath="/svgs/Stats_Icon.svg"
            Text="Stats"
            ButtonClass="@(currentPage == "stats" ? "nav-active" : "")"
            IsActive="@(currentPage == "stats")"
            OnClick="@(() => NavigateTo("stats"))" />
        
        <CircularNavigationButton 
            IconPath="/svgs/ScanQrCode_Icon.svg"
            Text="Scan"
            ButtonClass="primary @(currentPage == "scan" ? "nav-active" : "")"
            IsActive="@(currentPage == "scan")"
            OnClick="@(() => NavigateTo("scan"))" />
        
        <CircularNavigationButton 
            IconPath="/svgs/Settings_Icon.svg"
            Text="Settings"
            ButtonClass="@(currentPage == "settings" ? "nav-active" : "")"
            IsActive="@(currentPage == "settings")"
            OnClick="@(() => NavigateTo("settings"))" />
    </div>
</div>

@code {
    private string currentPage = "scan";

    protected override void OnInitialized()
    {
        // Determine the current page from the URL
        var uri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        var path = uri.AbsolutePath;
        
        if (path.Contains("stats"))
            currentPage = "stats";
        else if (path.Contains("settings"))
            currentPage = "settings";
        else
            currentPage = "scan";
    }

    private void NavigateTo(string page)
    {
        currentPage = page;
        
        switch (page)
        {
            case "stats":
                NavigationManager.NavigateTo("/Client/Stats");
                break;
            case "settings":
                NavigationManager.NavigateTo("/Client/Settings");
                break;
            default:
                NavigationManager.NavigateTo("/Client/ScanPage");
                break;
        }
    }
}